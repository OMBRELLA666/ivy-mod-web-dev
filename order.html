<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Order â€” Local Cow Plant Kitchen</title>
  <!-- Base site styles (same as your menu page) -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Page-specific styles -->
  <link rel="stylesheet" href="order.css" />
</head>
<body class="order-page">
  <!-- HEADER (same as menu page) -->
  <header class="topbar">
    <div class="container topbar-inner">
      <a class="logo" href="home.html">
        <span class="mark" aria-hidden="true">ðŸŒ¿</span>
        <span class="wordmark">Local Cow Plant Kitchen</span>
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="home.html">Home</a>
        <a href="menu.html">Menu</a>
        <a href="locations.html">Locations</a>
        <a href="contact.html">Contact</a>
        <a href="order.html" aria-current="page">Order</a>
      </nav>

      <div class="actions">
        <a class="btn btn-dark" href="#"><span class="icon">âœˆ</span> Ship a Pie</a>
        <a class="btn btn-danger" href="menu.html">Order</a>
      </div>
    </div>
  </header>

  <!-- STEP BAR (kept for consistency) -->
  <nav class="stepbar" aria-label="Order steps">
    <div class="container steps">
      <a class="step" href="locations.html">Locations</a>
      <a class="step" href="menu.html">Menu</a>
      <a class="step active" aria-current="page">Order</a>
      <a class="step">Review & Payment</a>
      <a class="step">Confirmation</a>
    </div>
  </nav>

  <!-- PAGE -->
  <main class="container order-grid">
    <!-- LEFT: Order builder -->
    <section class="order-builder" aria-label="Build your order">
      <h1 class="section-title">Build Your Pizza</h1>

      <!-- 3 Toggle Lists (accessible with <details>) -->
      <details class="picker" open>
        <summary class="picker-head">1) Choose Your Pizza</summary>
        <ul class="picker-list" role="radiogroup" aria-label="Pizza">
          <!-- data-price drives total calculation -->
          <li><label><input type="radio" name="pizza" value="Margherita" data-price="15.95" checked> Margherita â€” cashew mozzarella, basil, San Marzano</label></li>
          <li><label><input type="radio" name="pizza" value="Umami Supreme" data-price="19.95"> Umami Supreme â€” truffle mushroom, almond ricotta</label></li>
          <li><label><input type="radio" name="pizza" value="Mediterranean" data-price="18.25"> Mediterranean â€” olives, artichoke, roasted pepper</label></li>
          <li><label><input type="radio" name="pizza" value="BBQ Jackfruit" data-price="18.95"> BBQ Jackfruit â€” maple-smoky sauce, red onion</label></li>
          <li><label><input type="radio" name="pizza" value="White Garlic" data-price="17.95"> White Garlic â€” spinach, caramelized onion</label></li>
        </ul>
      </details>

      <details class="picker">
        <summary class="picker-head">2) Choose Your Dough (Gluten-Free)</summary>
        <ul class="picker-list" role="radiogroup" aria-label="Dough">
          <!-- dough price modifiers (can be 0) -->
          <li><label><input type="radio" name="dough" value="Cassava" data-mod="0" checked> Cassava crust</label></li>
          <li><label><input type="radio" name="dough" value="Quinoa" data-mod="1"> Quinoa crust (+$1.00)</label></li>
          <li><label><input type="radio" name="dough" value="Brown Rice" data-mod="0.5"> Brown Rice crust (+$0.50)</label></li>
        </ul>
      </details>

      <details class="picker">
        <summary class="picker-head">3) Choose Your Oil (No Seed Oils)</summary>
        <ul class="picker-list" role="radiogroup" aria-label="Oil">
          <li><label><input type="radio" name="oil" value="Extra Virgin Olive Oil" data-mod="0" checked> Extra Virgin Olive Oil</label></li>
          <li><label><input type="radio" name="oil" value="Avocado Oil" data-mod="0"> Avocado Oil</label></li>
        </ul>
      </details>

      <!-- Quantity & Notes -->
      <div class="row two">
        <div class="field">
          <label for="qty">Quantity</label>
          <input id="qty" name="qty" type="number" min="1" value="1" inputmode="numeric">
        </div>
        <div class="field">
          <label for="size">Size</label>
          <select id="size" name="size">
            <option value="10" data-mod="0">10"</option>
            <option value="12" data-mod="2">12" (+$2.00)</option>
            <option value="14" data-mod="4">14" (+$4.00)</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label for="notes">Special Instructions</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Extra basil, light sauce, etc."></textarea>
      </div>
    </section>

    <!-- RIGHT: Checkout -->
    <aside class="checkout" aria-label="Checkout">
      <h2 class="section-title">Delivery Details</h2>

      <form id="orderForm" novalidate>
        <!-- Contact -->
        <div class="row two">
          <div class="field">
            <label for="fullname">Full Name</label>
            <input id="fullname" name="fullname" type="text" autocomplete="name" required>
            <small class="err" data-for="fullname"></small>
          </div>
          <div class="field">
            <label for="phone">Phone</label>
            <input id="phone" name="phone" type="tel" autocomplete="tel" placeholder="(555) 555-5555" required>
            <small class="err" data-for="phone"></small>
          </div>
        </div>

        <div class="field">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" autocomplete="email" required>
          <small class="err" data-for="email"></small>
        </div>

        <!-- Address -->
        <div class="field">
          <label for="address">Street Address</label>
          <input id="address" name="address" type="text" autocomplete="address-line1" required>
          <small class="err" data-for="address"></small>
        </div>

        <div class="row three">
          <div class="field">
            <label for="city">City</label>
            <input id="city" name="city" type="text" autocomplete="address-level2" required>
            <small class="err" data-for="city"></small>
          </div>
          <div class="field">
            <label for="state">State</label>
            <input id="state" name="state" type="text" maxlength="2" placeholder="MI" autocomplete="address-level1" required>
            <small class="err" data-for="state"></small>
          </div>
          <div class="field">
            <label for="zip">ZIP</label>
            <input id="zip" name="zip" type="text" inputmode="numeric" maxlength="10" autocomplete="postal-code" required>
            <small class="err" data-for="zip"></small>
          </div>
        </div>

        <h3 class="section-sub">Payment</h3>
        <div class="field">
          <label for="cardname">Name on Card</label>
          <input id="cardname" name="cardname" type="text" autocomplete="cc-name" required>
          <small class="err" data-for="cardname"></small>
        </div>

        <div class="field">
          <label for="cardnumber">Card Number</label>
          <input id="cardnumber" name="cardnumber" type="text" inputmode="numeric" placeholder="4242 4242 4242 4242" autocomplete="cc-number" required>
          <small class="err" data-for="cardnumber"></small>
        </div>

        <div class="row three">
          <div class="field">
            <label for="exp">Expiry (MM/YY)</label>
            <input id="exp" name="exp" type="text" inputmode="numeric" placeholder="12/27" autocomplete="cc-exp" required>
            <small class="err" data-for="exp"></small>
          </div>
          <div class="field">
            <label for="cvc">CVC</label>
            <input id="cvc" name="cvc" type="text" inputmode="numeric" maxlength="4" autocomplete="cc-csc" required>
            <small class="err" data-for="cvc"></small>
          </div>
          <div class="field">
            <label for="zip2">Billing ZIP</label>
            <input id="zip2" name="zip2" type="text" inputmode="numeric" maxlength="10" autocomplete="postal-code" required>
            <small class="err" data-for="zip2"></small>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="summary">
          <h3>Order Summary</h3>
          <ul class="sum-lines">
            <li><span>Pizza</span><strong id="sumPizza">Margherita</strong></li>
            <li><span>Dough</span><strong id="sumDough">Cassava</strong></li>
            <li><span>Oil</span><strong id="sumOil">Extra Virgin Olive Oil</strong></li>
            <li><span>Size</span><strong id="sumSize">10"</strong></li>
            <li><span>Qty</span><strong id="sumQty">1</strong></li>
          </ul>
          <div class="totals">
            <div><span>Subtotal</span><strong id="sumSubtotal">$15.95</strong></div>
            <div><span>Tax (6%)</span><strong id="sumTax">$0.96</strong></div>
            <div class="grand"><span>Total</span><strong id="sumTotal">$16.91</strong></div>
          </div>
        </div>

        <button class="btn btn-danger btn-block" type="submit">Place Order</button>
        <p class="tiny">By placing an order you agree to our terms & allergen notice. 100% vegan â€¢ gluten-free â€¢ no seed oils.</p>
      </form>
    </aside>
  </main>

  <!-- FOOTER (same as menu page) -->
  <footer class="site-footer">
    <div class="container">
      Â© 2025 Local Cow Plant Kitchen â€¢ Ingredients & Allergen Info â€¢ Careers
    </div>
  </footer>

  <!-- Minimal JS: selection handling, price calc, validation, fake submit -->
  <script>
    (() => {
      const $ = (sel, ctx=document) => ctx.querySelector(sel);
      const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

      const priceFmt = n => "$" + n.toFixed(2);

      // State
      const state = {
        base: 15.95, doughMod: 0, sizeMod: 0, qty: 1,
        pizza: "Margherita", dough: "Cassava", oil: "Extra Virgin Olive Oil", size: '10"'
      };

      function updateFromUI(){
        // pizza price
        const pizza = $('input[name="pizza"]:checked');
        state.base  = parseFloat(pizza.dataset.price);
        state.pizza = pizza.value;

        // dough mod
        const dough = $('input[name="dough"]:checked');
        state.doughMod = parseFloat(dough.dataset.mod || "0");
        state.dough = dough.value;

        // oil
        const oil = $('input[name="oil"]:checked');
        state.oil = oil.value;

        // qty
        const qty = $('#qty');
        state.qty = Math.max(1, parseInt(qty.value || "1", 10));
        qty.value = state.qty;

        // size mod
        const size = $('#size').selectedOptions[0];
        state.sizeMod = parseFloat(size.dataset.mod || "0");
        state.size = size.value + '"';

        renderSummary();
      }

      function renderSummary(){
        const unit = state.base + state.doughMod + state.sizeMod;
        const subtotal = unit * state.qty;
        const tax = subtotal * 0.06;
        const total = subtotal + tax;

        $('#sumPizza').textContent = state.pizza;
        $('#sumDough').textContent = state.dough;
        $('#sumOil').textContent   = state.oil;
        $('#sumSize').textContent  = state.size;
        $('#sumQty').textContent   = state.qty;

        $('#sumSubtotal').textContent = priceFmt(subtotal);
        $('#sumTax').textContent      = priceFmt(tax);
        $('#sumTotal').textContent    = priceFmt(total);
      }

      // Wire up events
      $$('#qty, #size, input[name="pizza"], input[name="dough"], input[name="oil"]').forEach(el => {
        el.addEventListener('change', updateFromUI);
        el.addEventListener('input', updateFromUI);
      });

      updateFromUI();

      // Simple validation helper
      function requireFilled(id, testFn=(v)=>v.trim().length>1, msg="Required"){
        const input = $('#'+id);
        const err = document.querySelector('.err[data-for="'+id+'"]');
        const ok = testFn(input.value || "");
        err.textContent = ok ? "" : msg;
        input.classList.toggle('invalid', !ok);
        return ok;
      }

      // Luhn-ish basic card check (format only)
      function validCard(num){
        const digits = (num || "").replace(/\D/g, "");
        return digits.length >= 13 && digits.length <= 19;
      }

      $('#orderForm').addEventListener('submit', (e) => {
        e.preventDefault();

        const checks = [
          requireFilled('fullname'),
          requireFilled('phone', v => v.replace(/\D/g,'').length >= 10, "Enter a valid phone"),
          requireFilled('email', v => /\S+@\S+\.\S+/.test(v), "Enter a valid email"),
          requireFilled('address'),
          requireFilled('city'),
          requireFilled('state', v => /^[A-Za-z]{2}$/.test(v), "Use 2-letter code"),
          requireFilled('zip', v => v.replace(/\D/g,'').length >= 5, "Enter ZIP"),
          requireFilled('cardname'),
          requireFilled('cardnumber', validCard, "Invalid card number"),
          requireFilled('exp', v => /^\d{2}\/\d{2}$/.test(v), "MM/YY"),
          requireFilled('cvc', v => /^\d{3,4}$/.test(v), "3â€“4 digits"),
          requireFilled('zip2', v => v.replace(/\D/g,'').length >= 5, "Enter ZIP"),
        ];

        if(checks.every(Boolean)){
          // Simulate order success
          alert("Order placed! Thank you for choosing Local Cow Plant Kitchen.");
          e.target.reset();
          // reset to defaults
          $('input[name="pizza"][value="Margherita"]').checked = true;
          $('input[name="dough"][value="Cassava"]').checked = true;
          $('input[name="oil"][value="Extra Virgin Olive Oil"]').checked = true;
          $('#qty').value = 1;
          $('#size').value = "10";
          updateFromUI();
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    })();
  </script>
</body>
</html>
